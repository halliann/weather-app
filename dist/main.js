(()=>{"use strict";const e=(document.getElementById("search-form"),document.getElementById("city-input")),t=document.getElementById("search-btn"),n=document.getElementById("ham-btn"),s=document.getElementById("saved-areas-list"),o=document.getElementById("close-btn"),d=document.querySelector(".background-video"),c=document.querySelector(".card-contents"),a=(document.getElementById("weather-display"),document.getElementById("city-name")),i=document.getElementById("temp-display"),l=document.getElementById("icon-display"),r=document.getElementById("desc-display"),m=document.getElementById("video-cred"),u=document.querySelector(".save-btn"),y=document.getElementById("saved-btn"),g=document.getElementById("timestamp-display"),p=document.getElementById("refresh-btn");let v=[];async function w(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=b6ccca9010db8c2538605686e6b10f4e&units=imperial`;let n=await fetch(t),s=await n.json();if(console.log(s),n.ok)try{!function(e){let t=e.name,n=e.main.temp,s=e.weather[0].icon,o=e.weather[0].description;a.textContent=`${t}`,u.style.display="block",i.textContent=`${Math.round(n)}Â°F`,l.src=`https://openweathermap.org/img/wn/${s}.png`,r.textContent=o,console.log(t,n,s,o),v.includes(t)?(y.classList.add("fa-solid"),a.classList.add("saved-city")):(y.classList.remove("fa-solid"),a.classList.remove("saved-city")),function(e){["01d"].includes(e)?(d.src="/resources/backgroundVideos/sun.mp4",m.textContent="Video by Gusat Silviu: https://www.pexels.com/video/landscape-field-summer-sun-7861797/"):["02d","03d","04d"].includes(e)?(d.src="/resources/backgroundVideos/cloudy.mp4",m.textContent="Video by Magda Ehlers from Pexels: https://www.pexels.com/video/wild-grass-with-pink-flowers-in-full-bloom-3843103/"):["09d","10d","50d"].includes(e)?(d.src="/resources/backgroundVideos/rain.mp4",m.textContent="Video by Brett Sayles: https://www.pexels.com/video/rainy-day-2059694/"):["11d"].includes(e)?(d.src="/resources/backgroundVideos/storm.mp4",m.textContent="Video by Matias Luge: https://www.pexels.com/video/heavy-rain-falling-over-a-german-village-during-a-thunderstorm-13948020/"):["13d"].includes(e)?(d.src="/resources/backgroundVideos/snow.mp4",m.textContent="Video by Pixabay: https://www.pexels.com/video/video-of-snowfall-854881/"):["01n"].includes(e)?(d.src="/resources/backgroundVideos/clearNight.mp4",m.textContent="Video by Dmitry Varennikov: https://www.pexels.com/video/star-gazing-on-a-clear-starry-night-5382333/"):["02n","03n","04n","09n","10n","50n","11n","13n"].includes(e)?(d.src="/resources/backgroundVideos/cloudyNightSky.mp4",m.textContent="Video by Mark Edwin Hedia: https://www.pexels.com/video/dark-clouds-formation-covering-the-moon-3654535/"):d.src="/resources/backgroundVideos/default.mp4"}(s)}(s)}catch(e){console.error(e)}}function h(){const e=(new Date).toLocaleString();g.textContent=e,p.style.display="block"}t.addEventListener("click",(async t=>{t.preventDefault();let n=e.value;""===n?alert("Please enter city."):(console.log(`Fetching weather data for ${n}.`),b=n,w(n),c.classList.add("active"),h())})),u.addEventListener("click",(()=>{y.classList.toggle("fa-solid"),a.classList.toggle("saved-city");const t=a.textContent;a.classList.contains("saved-city")?(v.push(t),function(t){let n=document.createElement("li");n.textContent=t,s.appendChild(n),n.addEventListener("click",(()=>{e.value=t,w(t),b=t,c.classList.add("active"),h()}))}(t)):(v=v.filter((e=>e!==t)),function(e){let t=s.getElementsByTagName("li");for(let n of t)if(n.textContent===e){s.removeChild(n);break}}(t)),console.log("Saved cities:",v)}));let b="";p.addEventListener("click",(()=>{""!==b?(console.log(`Refreshing weather data for ${b}.`),w(b),h()):alert("No city searched yet!")})),n.addEventListener("click",(()=>{n.style.display="none",document.getElementById("saved-list-menu").style.display="block"})),o.addEventListener("click",(()=>{document.getElementById("saved-list-menu").style.display="none",n.style.display="block"}))})();